{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\Smartcity - React\\\\smartCityReact\\\\src\\\\component\\\\SearchForm.js\";\nimport React from 'react';\nimport SearchBar from './SearchBar';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { loadSportHalls } from './API';\nimport edit from \"../edit.png\";\n\nclass SearchForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      sportHalls: [],\n      sportHallsToShow: [],\n      inputName: \"\",\n      inputManager: \"\",\n      inputPhoneNumber: \"\",\n      inputEmail: \"\",\n      inputAddress: \"\",\n      loading: true,\n      error: false,\n      errorMessage: \"\"\n    };\n  }\n\n  componentDidMount() {\n    this.search();\n  }\n\n  search() {\n    this.setState({\n      loading: true,\n      error: false\n    }, async () => {\n      try {\n        const result = await loadSportHalls();\n        const state = {\n          loaded: true,\n          loading: false,\n          sportHalls: result,\n          sportHallsToShow: result\n        };\n        this.setState(state);\n      } catch (e) {\n        this.setState({\n          error: true,\n          loading: false,\n          loaded: true,\n          errorMessage: e.message\n        });\n      }\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props !== prevProps) {\n      this.setState({\n        sportHalls: this.props.sportHalls,\n        sportHallsToShow: this.props.sportHalls\n      });\n    }\n  }\n\n  addSportHall(event) {\n    event.preventDefault();\n    const newSportHall = {\n      name: this.state.inputName,\n      manager: this.state.inputManager,\n      phoneNumber: this.state.inputPhoneNumber,\n      email: this.state.inputEmail\n    };\n    this.props.addSportHall(newSportHall);\n  }\n\n  changeValuesToShow(string) {\n    const sportHallsToShow = this.state.sportHalls;\n    const afterFiltering = sportHallsToShow.filter(h => {\n      return h.name.toLowerCase().includes(string.toLowerCase()) || h.address.toLowerCase().includes(string.toLowerCase());\n    });\n    this.setState({\n      sportHallsToShow: afterFiltering\n    });\n  }\n\n  render() {\n    if (this.state.loading === true) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading ...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }, this);\n    } else if (this.state.error) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: this.state.errorMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(SearchBar, {\n          callback: searchValue => this.changeValuesToShow(searchValue)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Manager\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Phone number\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Address\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: this.state.sportHallsToShow.map((h, index) => {\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: h.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 104,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: h.manager\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: h.phone_number\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 106,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: h.email\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: h.address\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(Link, {\n                    to: `/sportHall/${h.id}`,\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: edit,\n                      className: \"edit-icon\",\n                      alt: \"modify\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 110,\n                      columnNumber: 73\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 110,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(Link, {\n                    to: `/sportHall/${h.id}`,\n                    children: \"Lien\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 113,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 37\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 33\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Name: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            onChange: event => {\n              this.setState({\n                inputName: event.target.value\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Manager: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            onChange: event => {\n              this.setState({\n                inputManager: event.target.value\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Phone number: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            onChange: event => {\n              this.setState({\n                inputPhoneNumber: event.target.value\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Email: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            onChange: event => {\n              this.setState({\n                inputEmail: event.target.value\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: event => this.addSportHall(event),\n            children: \"Ajouter\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    sportHalls: state.sportHalls.listeSportHalls\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    addSportHall: sportHallObjet => {\n      dispatch({\n        type: \"addSportHall\",\n        payload: {\n          newSportHall: sportHallObjet\n        }\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchForm);","map":{"version":3,"sources":["C:/Users/User/Desktop/Smartcity - React/smartCityReact/src/component/SearchForm.js"],"names":["React","SearchBar","Link","connect","loadSportHalls","edit","SearchForm","Component","constructor","props","state","sportHalls","sportHallsToShow","inputName","inputManager","inputPhoneNumber","inputEmail","inputAddress","loading","error","errorMessage","componentDidMount","search","setState","result","loaded","e","message","componentDidUpdate","prevProps","addSportHall","event","preventDefault","newSportHall","name","manager","phoneNumber","email","changeValuesToShow","string","afterFiltering","filter","h","toLowerCase","includes","address","render","searchValue","map","index","phone_number","id","target","value","mapStateToProps","listeSportHalls","mapDispatchToProps","dispatch","sportHallObjet","type","payload"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport SearchBar from './SearchBar';\r\nimport {Link} from 'react-router-dom';\r\nimport {connect} from 'react-redux';\r\nimport {loadSportHalls} from './API';\r\nimport edit from \"../edit.png\";\r\n\r\nclass SearchForm extends React.Component{\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            sportHalls: [],\r\n            sportHallsToShow: [],\r\n            inputName: \"\",\r\n            inputManager: \"\",\r\n            inputPhoneNumber: \"\",\r\n            inputEmail: \"\",\r\n            inputAddress: \"\",\r\n            loading: true,\r\n            error: false,\r\n            errorMessage: \"\",\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        this.search();\r\n    }\r\n    search() {\r\n        this.setState({loading: true, error: false}, async () => {\r\n            try{\r\n                const result = await loadSportHalls();\r\n                const state = {\r\n                    loaded: true,\r\n                    loading: false,\r\n                    sportHalls: result,\r\n                    sportHallsToShow: result,\r\n                };\r\n                this.setState(state);\r\n            } catch (e) {\r\n                this.setState({\r\n                    error: true,\r\n                    loading: false,\r\n                    loaded: true,\r\n                    errorMessage: e.message\r\n                });\r\n            }\r\n        });\r\n\r\n    }\r\n    componentDidUpdate(prevProps) {\r\n        if(this.props !== prevProps){\r\n            this.setState({\r\n                sportHalls: this.props.sportHalls,\r\n                sportHallsToShow: this.props.sportHalls\r\n            });\r\n        }\r\n    }\r\n\r\n    addSportHall(event){\r\n        event.preventDefault();\r\n        const newSportHall = {\r\n            name: this.state.inputName,\r\n            manager: this.state.inputManager,\r\n            phoneNumber: this.state.inputPhoneNumber,\r\n            email: this.state.inputEmail\r\n        }\r\n        this.props.addSportHall(newSportHall);\r\n    }\r\n\r\n    changeValuesToShow(string){\r\n        const sportHallsToShow = this.state.sportHalls;\r\n        const afterFiltering = sportHallsToShow.filter(h => {\r\n            return (h.name.toLowerCase().includes(string.toLowerCase()) || h.address.toLowerCase().includes(string.toLowerCase()));\r\n        });\r\n        this.setState({sportHallsToShow: afterFiltering});\r\n    }\r\n\r\n    render() {\r\n        if(this.state.loading === true){\r\n            return (<p>Loading ...</p>);\r\n        } else if(this.state.error){\r\n            return (<p>{this.state.errorMessage}</p>);\r\n        } else {\r\n            return (\r\n                <div>\r\n\r\n                    <SearchBar callback={(searchValue) => this.changeValuesToShow(searchValue)}/>\r\n                    <table>\r\n                        <thead>\r\n                        <tr>\r\n                            <th>Name</th>\r\n                            <th>Manager</th>\r\n                            <th>Phone number</th>\r\n                            <th>Email</th>\r\n                            <th>Address</th>\r\n                            <th>Edit</th>\r\n                            <th>Delete</th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        {this.state.sportHallsToShow.map((h, index) => {\r\n                            return (\r\n                                <tr key={index}>\r\n                                    <td>{h.name}</td>\r\n                                    <td>{h.manager}</td>\r\n                                    <td>{h.phone_number}</td>\r\n                                    <td>{h.email}</td>\r\n                                    <td>{h.address}</td>\r\n                                    <td>\r\n                                        <Link to={`/sportHall/${h.id}`}><img src={edit} className=\"edit-icon\" alt=\"modify\"/></Link>\r\n                                    </td>\r\n                                    <td>\r\n                                        <Link to={`/sportHall/${h.id}`}>Lien</Link>\r\n                                    </td>\r\n                                </tr>\r\n                            );\r\n                        })}\r\n\r\n                        </tbody>\r\n                    </table>\r\n                    <form>\r\n                        <label>Name: </label>\r\n                        <input type=\"text\"\r\n                               onChange={(event) => {\r\n                                   this.setState({inputName: event.target.value});\r\n                               }}/>\r\n                        <label>Manager: </label>\r\n                        <input type=\"text\"\r\n                               onChange={(event) => {\r\n                                   this.setState({inputManager: event.target.value});\r\n                               }}/>\r\n                        <label>Phone number: </label>\r\n                        <input type=\"text\"\r\n                               onChange={(event) => {\r\n                                   this.setState({inputPhoneNumber: event.target.value});\r\n                               }}/>\r\n                        <label>Email: </label>\r\n                        <input type=\"email\"\r\n                               onChange={(event) => {\r\n                                   this.setState({inputEmail: event.target.value});\r\n                               }}/>\r\n                        <button onClick={(event) => this.addSportHall(event)}>Ajouter</button>\r\n                    </form>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        sportHalls : state.sportHalls.listeSportHalls\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        addSportHall: (sportHallObjet) => {\r\n            dispatch({type: \"addSportHall\", payload:{newSportHall: sportHallObjet}});\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchForm);"]},"metadata":{},"sourceType":"module"}